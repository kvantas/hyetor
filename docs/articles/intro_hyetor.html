<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An introduction to <code>hyetor</code> • hyetor</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="An introduction to &lt;code&gt;hyetor&lt;/code&gt;">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hyetor</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.0.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/erosivity.html">Rainfall erosivity calculation</a>
    </li>
    <li>
      <a href="../articles/intro_hyetor.html">An introduction to `hyetor`</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kvantas/hyetor">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>An introduction to <code>hyetor</code>
</h1>
                        <h4 class="author">Konstantinos Vantas</h4>
            
            <h4 class="date">2018-09-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/kvantas/hyetor/blob/master/vignettes/intro_hyetor.Rmd"><code>vignettes/intro_hyetor.Rmd</code></a></small>
      <div class="hidden name"><code>intro_hyetor.Rmd</code></div>

    </div>

    
    
<div id="what-does-hyetor" class="section level2">
<h2 class="hasAnchor">
<a href="#what-does-hyetor" class="anchor"></a>What does <code>hyetor</code>
</h2>
<p><code>hyetor</code> provides functionality to analyze fixed interval precipitation records. The functions that are provided are the family of functions: <code><a href="../reference/hyet_create.html">hyet_create()</a></code>, <code>hyet_fill</code>, <code>hyet_aggregate</code>, etc., to easily preprocess and analyze precipitation time-series. All these functions return their results as <a href="http://tibble.tidyverse.org/">tibbles</a> and make use of <a href="https://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html">magrittr’s</a> pipe operator <code>%&gt;%</code> to improve the readability and maintainability of code.</p>
<div id="internal-data-sets" class="section level4">
<h4 class="hasAnchor">
<a href="#internal-data-sets" class="anchor"></a>Internal data-sets</h4>
<p>This time series comes from the weather station ‘Arna’ in Greece with coordinates <code>36.88002, 22.41292</code> (ETRS89) and altitude 779 m. The owner of that weather station is the Ministry of Environment and Energy. Precipitation’s units of measurement is in mm and the time step is five minutes.</p>
</div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>This is a minimal example which shows how to use the package’s functions to analyze the internal data set.</p>
<p>Load libraries and view the first rows of the internal precipitation time-series:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(hyetor)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">library</span>(tibble)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">library</span>(lubridate)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">prec5min</a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt; # A tibble: 48,209 x 2</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt;    date                 prec</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt;    &lt;dttm&gt;              &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt;  1 1954-12-14 07:40:00     0</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt;  2 1954-12-14 07:45:00     0</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt;  3 1954-12-14 07:50:00     0</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt;  4 1954-12-14 07:55:00     0</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt;  5 1954-12-14 08:00:00     0</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt;  6 1954-12-14 08:05:00     0</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt;  7 1954-12-14 08:10:00     0</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt;  8 1954-12-14 08:15:00     0</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#&gt;  9 1954-12-14 08:20:00     0</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt; 10 1954-12-14 08:25:00     0</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="co">#&gt; # ... with 48,199 more rows</span></a></code></pre></div>
<p>Let’s create a plot:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">prec5min <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> prec)) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">"Precipitation (mm)"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">"Date"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="st">  </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<p><img src="intro_hyetor_files/figure-html/ts_plot-1.png" width="700"></p>
<div id="preprocessing" class="section level3">
<h3 class="hasAnchor">
<a href="#preprocessing" class="anchor"></a>Preprocessing</h3>
<p>The <code>hyet_fill</code> function is used to fill missing date values with NA values. This function can be used when missing values in time series are marked implicitly using missing dates.</p>
<p>Let’s use the <code>hyet_fill</code> function and plot again the data</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">prec_filled &lt;-<span class="st"> </span>prec5min <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/hyet_fill.html">hyet_fill</a></span>(<span class="dt">time_step =</span> <span class="dv">5</span>, <span class="dt">ts_unit =</span> <span class="st">"mins"</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">prec_filled <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> prec)) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">"Precipitation (mm)"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">"Date"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="st">  </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<p><img src="intro_hyetor_files/figure-html/missing%20values%20report-1.png" width="700"></p>
</div>
<div id="analysis" class="section level3">
<h3 class="hasAnchor">
<a href="#analysis" class="anchor"></a>Analysis</h3>
<p>Split to independent rainstorms and calculate erosivity values with cumulative precipitation greater than 12,7 mm:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">prec5min <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/hyet_split.html">hyet_split</a></span>(<span class="dt">time_step =</span> <span class="dv">5</span>, <span class="dt">ts_unit =</span> <span class="st">"mins"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/hyet_erosivity.html">hyet_erosivity</a></span>(<span class="dt">time_step =</span> <span class="dv">5</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="st">  </span><span class="kw">filter</span>(cum_prec <span class="op">&gt;</span><span class="st"> </span><span class="fl">12.7</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="st">  </span><span class="kw">select</span>(begin, duration, cum_prec, erosivity)</a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt; # A tibble: 29 x 4</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt;    begin               duration    cum_prec erosivity</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt;    &lt;dttm&gt;              &lt;time&gt;         &lt;dbl&gt;     &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt;  1 1955-03-03 10:05:00 " 780 mins"     13.0      7.33</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt;  2 1955-04-14 14:15:00 " 620 mins"     38.7    130.  </span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt;  3 1955-04-15 11:15:00 1235 mins       24.7     30.4 </span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt;  4 1955-05-11 13:30:00 " 375 mins"     28.2    123.  </span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt;  5 1955-07-15 14:50:00 " 125 mins"     19.4    162.  </span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt;  6 1955-08-30 14:30:00 " 150 mins"     23.8    115.  </span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt;  7 1955-09-02 12:05:00 " 360 mins"     25.2    124.  </span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt;  8 1955-09-04 13:10:00 " 170 mins"     20.4     52.5 </span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt;  9 1955-09-28 18:05:00 " 100 mins"     35.6    366.  </span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt; 10 1955-10-01 01:50:00 1115 mins       29.6     47.4 </span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="co">#&gt; # ... with 19 more rows</span></a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#what-does-hyetor">What does <code>hyetor</code></a></li>
      <li><a href="#example">Example</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Konstantinos Vantas.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
